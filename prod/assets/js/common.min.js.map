{"version":3,"sources":["assets/js/common.js"],"names":["dataSet","HorizontalBarGraph","this","init","prototype","initGraph","setAxis","bindEvents","_this","d3","select","on","getData","updateGraph","selectAll","data","enter","append","attr","d","i","style","transition","delay","duration","callback","csv","error","len","length","push","item1","xScale","scaleLinear","domain","range","call","axisBottom","ticks","window","addEventListener"],"mappings":"AAAA,GAAIA,UAAW,IAAK,IAAK,EAAG,GAAI,KAE5BC,mBAAqB,WACvBC,KAAKC,OAEPF,oBAAmBG,WACjBD,KAAM,WACJD,KAAKG,YACLH,KAAKI,UACLJ,KAAKK,cAEPA,WAAY,WACV,GAAIC,GAAQN,IACZO,IAAGC,OAAO,iBAAiBC,GAAG,QAAS,WACrCH,EAAMI,QAASJ,EAAMK,gBAGzBR,UAAW,WACTI,GAAGC,OAAO,YACPI,UAAU,QACVC,KAAKf,SACLgB,QACAC,OAAO,QACPC,KAAK,IAAK,GACVA,KAAK,IAAK,SAASC,EAAEC,GACpB,MAAW,IAAJA,IAERF,KAAK,QAAS,SAASC,EAAGC,GACzB,MAAOD,GAAI,OAEZD,KAAK,SAAU,QACfP,GAAG,QAAS,WACXF,GAAGC,OAAOR,MACPmB,MAAM,OAAQ,WAGvBR,YAAa,SAASb,GACpBS,GAAGC,OAAO,YACPI,UAAU,QACVC,KAAKf,GACLsB,aACAC,MAAM,SAASJ,EAAGC,GACjB,MAAW,KAAJA,IAERI,SAAS,MACTN,KAAK,QAAS,SAASC,EAAGC,GACzB,MAAOD,GAAI,QAGjBP,QAAS,SAAUa,GACjBhB,GAAGiB,IAAI,mBAAoB,SAASC,EAAOZ,GAEzC,IAAK,GADDf,MACKoB,EAAI,EAAGQ,EAAMb,EAAKc,OAAQT,EAAIQ,EAAKR,IAC1CpB,EAAQ8B,KAAMf,EAAKK,GAAGW,MAExBN,GAAUzB,MAGdM,QAAS,WACP,GAAI0B,GAASvB,GAAGwB,cACbC,QAAQ,EAAG,MACXC,OAAO,EAAG,KAEb1B,IAAGC,OAAO,YACPO,OAAO,KACPC,KAAK,QAAS,QACdA,KAAK,YAAa,kBAA2C,IAAtB,EAAIlB,QAAQ6B,QAAe,GAAK,KACvEO,KAAM3B,GAAG4B,WAAYL,GAASM,MAAM,MAI3CC,OAAOC,iBAAiB,OAAQ,WAC9B,GAAIvC","file":"common.min.js","sourcesContent":["var dataSet = [300, 130, 5, 60, 240];\n\nvar HorizontalBarGraph = function() {\n  this.init();\n};\nHorizontalBarGraph.prototype = {\n  init: function() {\n    this.initGraph();\n    this.setAxis();\n    this.bindEvents();\n  },\n  bindEvents: function() {\n    var _this = this;\n    d3.select('#updateButton').on('click', function() {\n      _this.getData( _this.updateGraph );\n    });\n  },\n  initGraph: function() {\n    d3.select('#myGraph')\n      .selectAll('rect')\n      .data(dataSet)\n      .enter()\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', function(d,i) { \n        return i * 25;\n      })\n      .attr('width', function(d, i) {\n        return d + 'px';\n      })\n      .attr('height', '20px')\n      .on('click', function() {\n        d3.select(this)\n          .style('fill', 'cyan');\n      });\n  },\n  updateGraph: function(dataSet) {\n    d3.select('#myGraph')\n      .selectAll('rect')\n      .data(dataSet)\n      .transition() //アニメーションさせる\n      .delay(function(d, i) { //遅延実行する\n        return i * 500\n      })\n      .duration(2500) //アニメーションのスピードを調整\n      .attr('width', function(d, i) {\n        return d + 'px';\n      });\n  },\n  getData: function( callback ) {\n    d3.csv('/data/mydata.csv', function(error, data) {\n      var dataSet = [];\n      for( var i = 0, len = data.length; i < len; i++ ) {\n        dataSet.push( data[i].item1 );\n      }\n      callback( dataSet );\n    });\n  },\n  setAxis: function() {\n    var xScale = d3.scaleLinear()\n      .domain([0, 300])\n      .range([0, 300]);\n\n    d3.select('#myGraph')\n      .append('g')\n      .attr('class', 'axis')\n      .attr('transform', \"translate(10, \" + ((1 + dataSet.length) * 20 + 5) + \")\")\n      .call( d3.axisBottom( xScale ).ticks(5) );\n  }\n}\n\nwindow.addEventListener('load', function() {\n  new HorizontalBarGraph();\n});\n"],"sourceRoot":"SORUCE_DIR"}