{"version":3,"sources":["assets/js/d3-to-svg.js"],"names":["d3toSvg","this","$myGraph","d3","select","init","prototype","$svg","append","fetchTextData","initStyle","i","len","attr","setStyleAll","setStyle","$svgElement","transition","duration","selectAll","d","fetchCSVData","_this","csv","row","data1","data2","data3","get","error","data","dataSet","length","push","showGraph","fetchJsonData","json","console","log","sales","fetchHtmlData","html","docFragment","tr","querySelectorAll","td","firstChild","nodeValue","fetchXmlData","xml","xmlRoot","xmlData","salesRoot","salesData","text","plainText","split","enter","window","addEventListener"],"mappings":"AAAA,GAAIA,SAAU,WACZC,KAAKC,SAAWC,GAAGC,OAAO,YAC1BH,KAAKI,OAEPL,SAAQM,WACND,KAAM,WACJJ,KAAKM,KAAON,KAAKC,SAASM,OAAO,OAKjCP,KAAKQ,iBAEPC,UAAW,WACT,IAAK,GAAIC,GAAI,EAAGC,EAAM,EAAGD,EAAIC,EAAKD,IAChCV,KAAKM,KAAKC,OAAO,QACdK,KAAK,IAAK,QACVA,KAAK,IAAS,GAAJF,EAAS,MACnBE,KAAK,QAAS,SACdA,KAAK,SAAU,OAEpBZ,MAAKa,eAEPC,SAAU,SAASC,GACjBA,EAAYH,KAAK,IAAK,QAEnBA,KAAK,IAAK,QACVA,KAAK,QAAS,SACdA,KAAK,SAAU,QAEfI,aACAC,SAAS,KACTL,KAAK,QAAS,QAKdA,KAAK,QAAS,aAEnBC,YAAa,WACXX,GAAGgB,UAAU,QACVF,aAEAJ,KAAK,QAAS,SAASO,EAAGT,GACzB,GAAU,IAANA,EACF,MAAO,cAIfU,aAAc,WACZ,GAAIC,GAAQrB,IACZE,IAAGoB,IAAI,oBAEJC,IAAI,SAASJ,GACZ,OACEK,MAAOL,EAAS,MAChBM,MAAON,EAAS,MAChBO,MAAOP,EAAS,SAGnBQ,IAAI,SAASC,EAAOC,GAGnB,IAAK,GAFDC,MAEKpB,EAAI,EAAGC,EAAMkB,EAAKE,OAAQrB,EAAIC,EAAKD,IAC1CoB,EAAQE,KAAMH,EAAKnB,GAAGc,MAExBH,GAAMY,UAAWH,MAGvBI,cAAe,WACb,GAAIb,GAAQrB,IACZE,IAAGiC,KAAK,oBAAqB,SAASP,EAAOC,GAC3C,GAAGD,EAED,WADAQ,SAAQR,MAAMA,EAGhBQ,SAAQC,IAAIR,EAEZ,KAAK,GADDC,MACKpB,EAAI,EAAGC,EAAMkB,EAAKE,OAAQrB,EAAIC,EAAKD,IAC1CoB,EAAQE,KAAMH,EAAKnB,GAAG4B,MAAM,GAE9BjB,GAAMY,UAAWH,MAGrBS,cAAe,WACb,GAAIlB,GAAQrB,IACZE,IAAGsC,KAAK,oBAAqB,SAASZ,EAAOa,GAC3C,GAAIb,EAEF,WADAQ,SAAQR,MAAOA,EAMjB,KAAK,GAHDc,GAAKD,EAAYE,iBAAiB,YAClCb,KAEKpB,EAAI,EAAGC,EAAM+B,EAAGX,OAAQrB,EAAIC,EAAKD,IAAM,CAC9C,GAAIkC,GAAKF,EAAGhC,GAAGiC,iBAAiB,KAChC,IAAKC,GAAoB,IAAdA,EAAGb,OAAd,CAGA,GAAIZ,GAAIyB,EAAG,GAAGC,WAAWC,SACzBhB,GAAQE,KAAKb,IAEfE,EAAMY,UAAWH,MAGrBiB,aAAc,WACZ1B,MAAQrB,KACRE,GAAG8C,IAAI,mBAAoB,SAASpB,EAAOqB,GACzC,GAAGrB,EAED,WADAQ,SAAQR,MAAMA,EAQhB,KAAK,GALDsB,GAAUD,EAAQN,iBAAiB,QACnCQ,EAAYD,EAAQ,GACpBE,EAAYD,EAAUR,iBAAiB,SACvCb,KAEKpB,EAAI,EAAGC,EAAMyC,EAAUrB,OAAQrB,EAAIC,EAAKD,IAAM,CACrD,GAAIS,GAAIiC,EAAU1C,GAAGmC,WAAWC,SAChChB,GAAQE,KAAKb,GAEfE,MAAMY,UAAWH,MAGrBtB,cAAe,WACb,GAAIa,GAAQrB,IACZE,IAAGmD,KAAK,mBAAoB,SAASzB,EAAO0B,GAC1C,GAAI1B,EAEF,WADAQ,SAAQR,MAAMA,EAOhB,KAAK,GAJDC,GAAOyB,EAAUC,MAAM,MACvBzB,KACAQ,EAAQT,EAAK,GAAG0B,MAAM,KAEjB7C,EAAI,EAAGC,EAAM2B,EAAMP,OAAQrB,EAAIC,EAAKD,IAC3CoB,EAAQE,KAAMM,EAAM5B,GAEtBW,GAAMY,UAAWH,MAGrBG,UAAW,SAAUH,GACnB9B,KAAKM,KACFY,UAAU,QACVW,KAAKC,GACL0B,QACAjD,OAAO,QACPK,KAAK,QAAS,OACdA,KAAK,QAAS,SAASO,EAAGT,GACzB,MAAOS,KAERP,KAAK,SAAU,IACfA,KAAK,IAAK,GACVA,KAAK,IAAK,SAASO,EAAET,GACpB,MAAW,IAAJA,MAKf+C,OAAOC,iBAAiB,OAAQ,WAC9B,GAAI3D","file":"d3-to-svg.min.js","sourcesContent":["var d3toSvg = function() {\n  this.$myGraph = d3.select('#myGraph');\n  this.init();\n};\nd3toSvg.prototype = {\n  init: function() {\n    this.$svg = this.$myGraph.append('svg')\n    // this.fetchCSVData();\n    // this.fetchJsonData();\n    // this.fetchHtmlData();\n    // this.fetchXmlData();\n    this.fetchTextData();\n  },\n  initStyle: function() {\n    for( var i = 0, len = 5; i < len; i++ ) {\n      this.$svg.append('rect')\n        .attr('x', '50px')\n        .attr('y', i * 25 + 'px')\n        .attr('width', '200px')\n        .attr('height', '20px');\n    }\n    this.setStyleAll();\n  },\n  setStyle: function($svgElement) {\n    $svgElement.attr('x', '10px')\n      //属性を指定する\n      .attr('y', '50px')\n      .attr('width', '200px')\n      .attr('height', '30px')\n      //アニメーションをつける\n      .transition()\n      .duration(3000)\n      .attr('width', '50px')\n      //スタイルを指定する\n      // .style('fill', 'red')\n      // .style('stroke', 'black');\n      // classを付与する\n      .attr('class', 'bar_note');\n  },\n  setStyleAll: function() {\n    d3.selectAll('rect')\n      .transition()\n      // 条件によりclassを付与する\n      .attr('class', function(d, i) {\n        if( i === 2 ) {\n          return 'bar_note';\n        }\n      });\n  },\n  fetchCSVData: function() {\n    var _this = this;\n    d3.csv('/data/mydata.csv')\n      // CSVから取得したデータの列名を変更する\n      .row(function(d) {\n        return {\n          data1: d['item1'],\n          data2: d['item2'],\n          data3: d['item3']\n        }\n      })\n      .get(function(error, data) {\n        var dataSet = [];\n\n        for( var i = 0, len = data.length; i < len; i++ ) {\n          dataSet.push( data[i].data1 );\n        }\n        _this.showGraph( dataSet );\n      });\n  },\n  fetchJsonData: function() {\n    var _this = this;\n    d3.json('/data/mydata.json', function(error, data) {\n      if(error) {\n        console.error(error);\n        return;\n      }\n      console.log(data);\n      var dataSet = [];\n      for( var i = 0, len = data.length; i < len; i++ ) {\n        dataSet.push( data[i].sales[0] )\n      }\n      _this.showGraph( dataSet );\n    });\n  },\n  fetchHtmlData: function() {\n    var _this = this;\n    d3.html('/data/mydata.html', function(error, docFragment) {\n      if( error ) {\n        console.error( error );\n        return;\n      }\n      var tr = docFragment.querySelectorAll('table tr');\n      var dataSet = [];\n\n      for( var i = 0, len = tr.length; i < len; i++ ) {\n        var td = tr[i].querySelectorAll('td'); \n        if( !td || td.length === 0 ) {\n          continue;\n        }\n        var d = td[0].firstChild.nodeValue;\n        dataSet.push(d);\n      }\n      _this.showGraph( dataSet );\n    });\n  },\n  fetchXmlData: function() {\n    _this = this;\n    d3.xml('/data/mydata.xml', function(error, xmlRoot) {\n      if(error) {\n        console.error(error);\n        return;\n      }\n      var xmlData = xmlRoot.querySelectorAll('data');\n      var salesRoot = xmlData[0];\n      var salesData = salesRoot.querySelectorAll('sales');\n      var dataSet = [];\n\n      for( var i = 0, len = salesData.length; i < len; i++ ) {\n        var d = salesData[i].firstChild.nodeValue;\n        dataSet.push(d);\n      }\n      _this.showGraph( dataSet );\n    });\n  },\n  fetchTextData: function() {\n    var _this = this;\n    d3.text('/data/mydata.txt', function(error, plainText) {\n      if( error ) {\n        console.error(error);\n        return;\n      }\n      var data = plainText.split('\\x0a')\n      var dataSet = [];\n      var sales = data[0].split('/');\n\n      for( var i = 1, len = sales.length; i < len; i++ ) {\n        dataSet.push( sales[i] );\n      }\n      _this.showGraph( dataSet );\n    });\n  },\n  showGraph: function( dataSet ) {\n    this.$svg\n      .selectAll('rect')\n      .data(dataSet)\n      .enter()\n      .append('rect')\n      .attr('class', 'bar')\n      .attr('width', function(d, i) {\n        return d;\n      })\n      .attr('height', 20)\n      .attr('x', 9)\n      .attr('y', function(d,i) {\n        return i * 25;\n      });\n  }\n};\n\nwindow.addEventListener('load', function() {\n  new d3toSvg();\n});"],"sourceRoot":"SORUCE_DIR"}